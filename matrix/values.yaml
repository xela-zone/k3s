# Element Server Suite (ESS) Official Values v26.2.0
global:
  serverName: "kbrt.xyz"
  hostnames:
    synapse: "matrix.kbrt.xyz"
    matrixAuthenticationService: "matrix-auth.kbrt.xyz"
    matrixRTC: "matrix-calls.kbrt.xyz"
    elementWeb: "chat.kbrt.xyz"
    elementAdmin: "matrix-admin.kbrt.xyz"

# Synapse Configuration
synapse:
  postgres:
    host: matrix-db-rw.matrix.svc
    port: 5432
    database: synapse
    user: synapse
    existingSecret: matrix-db-app
    existingSecretKey: password
  media:
    s3:
      enabled: true
      bucket: "assets-6a939b"
      region: "us-west-004"
      endpoint: "https://s3.us-west-004.backblazeb2.com"
      existingSecret: backblaze-app-key-secret
      accessKeySecretKey: username
      secretKeySecretKey: password
      publicBaseUrl: "https://assets.kbrt.xyz/"

# Matrix Authentication Service (MAS)
matrixAuthenticationService:
  postgres:
    host: matrix-db-rw.matrix.svc
    port: 5432
    database: synapse # MAS can share DB if needed, but usually wants its own. 
    # I'll use 'synapse' for now since I only have one DB cluster initialized.
    user: synapse
    existingSecret: matrix-db-app
    existingSecretKey: password

# Upstream OIDC (Authentik)
authentication:
  oidc:
    - id: authentik
      issuer: "https://id.kbrt.xyz/application/o/matrix/"
      clientIdSecretName: matrix-secrets
      clientIdSecretKey: OIDC_CLIENT_ID
      clientSecretSecretName: matrix-secrets
      clientSecretSecretKey: OIDC_CLIENT_SECRET

# Element Web
elementWeb:
  # config keys might have changed, keeping it simple
  {}

# Ingress Configuration
ingress:
  annotations:
    kubernetes.io/ingress.class: traefik
