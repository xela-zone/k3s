# Element Server Suite (ESS) Official Values
global:
  domain: kbrt.xyz
  externalProxy:
    use: true
    matrixBaseUrl: https://matrix.kbrt.xyz
    elementWebBaseUrl: https://chat.kbrt.xyz

# --- Components ---
synapse:
  enabled: true
  config:
    serverName: kbrt.xyz

mas:
  enabled: true
  config:
    publicBaseUrl: https://auth.kbrt.xyz/
    # Upstream OIDC (Authentik)
    upstreamOidc:
      issuer: "https://id.kbrt.xyz/application/o/matrix/"
      clientIdSecretName: matrix-secrets
      clientIdSecretKey: OIDC_CLIENT_ID
      clientSecretSecretName: matrix-secrets
      clientSecretSecretKey: OIDC_CLIENT_SECRET

element-web:
  enabled: true
  config:
    brand: "KBRT Chat"

# Element Admin Console
element-admin:
  enabled: true

# Matrix RTC (Element Call)
mrtc:
  enabled: true

# --- Infrastructure ---
postgresql:
  enabled: false

externalPostgres:
  host: matrix-db-rw.matrix.svc
  port: 5432
  database: synapse
  user: synapse
  existingSecret: matrix-db-app
  existingSecretKey: password

media_repository:
  s3:
    enabled: true
    bucket: "assets-6a939b"
    region: "us-west-004"
    endpoint: "https://s3.us-west-004.backblazeb2.com"
    existingSecret: backblaze-app-key-secret
    accessKeySecretKey: username
    secretKeySecretKey: password
    public_baseurl: "https://assets.kbrt.xyz/"

# Ingress Configuration (Traefik)
ingress:
  enabled: true
  ingressClassName: traefik
  hosts:
    - host: matrix.kbrt.xyz
      paths: [{path: /, pathType: Prefix}]
    - host: chat.kbrt.xyz
      paths: [{path: /, pathType: Prefix}]
    - host: auth.kbrt.xyz
      paths: [{path: /, pathType: Prefix}]
    - host: admin.kbrt.xyz
      paths: [{path: /, pathType: Prefix}]
    - host: mrtc.kbrt.xyz
      paths: [{path: /, pathType: Prefix}]
    - host: kbrt.xyz
      paths: [{path: /, pathType: Prefix}]
